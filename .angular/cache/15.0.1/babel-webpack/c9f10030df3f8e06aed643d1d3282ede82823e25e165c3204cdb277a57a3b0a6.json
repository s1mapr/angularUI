{"ast":null,"code":"import { environment } from \"../environment\";\nimport { AppComponent } from \"../app.component\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@angular/forms\";\nfunction TitleViewComponent_div_0_button_5_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r9 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 31);\n    i0.ɵɵlistener(\"click\", function TitleViewComponent_div_0_button_5_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r9);\n      const ctx_r8 = i0.ɵɵnextContext(2);\n      ctx_r8.isLiked = !ctx_r8.isLiked;\n      return i0.ɵɵresetView(ctx_r8.like(true));\n    });\n    i0.ɵɵelementStart(1, \"strong\");\n    i0.ɵɵtext(2, \"\\u0412\\u043F\\u043E\\u0434\\u043E\\u0431\\u0430\\u0442\\u0438\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction TitleViewComponent_div_0_button_6_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r11 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 32);\n    i0.ɵɵlistener(\"click\", function TitleViewComponent_div_0_button_6_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r11);\n      const ctx_r10 = i0.ɵɵnextContext(2);\n      ctx_r10.isLiked = !ctx_r10.isLiked;\n      return i0.ɵɵresetView(ctx_r10.like(false));\n    });\n    i0.ɵɵelementStart(1, \"strong\");\n    i0.ɵɵtext(2, \"\\u0423\\u043F\\u043E\\u0434\\u043E\\u0431\\u0430\\u043D\\u043E\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction TitleViewComponent_div_0_div_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 5)(1, \"a\", 33);\n    i0.ɵɵtext(2, \" \\u0410\\u0432\\u0442\\u043E\\u0440: \");\n    i0.ɵɵelementStart(3, \"strong\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵpropertyInterpolate1(\"href\", \"/profile-view/\", ctx_r3.title.author.id, \"\", i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\"@\", ctx_r3.title.author.nickName, \"\");\n  }\n}\nfunction TitleViewComponent_div_0_a_27_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"a\", 34);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const cat_r12 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(cat_r12.genre);\n  }\n}\nfunction TitleViewComponent_div_0_a_32_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"a\", 34);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const tag_r13 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(tag_r13.tag);\n  }\n}\nfunction TitleViewComponent_div_0_a_37_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"a\", 34);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ser_r14 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(ser_r14.serialName);\n  }\n}\nfunction TitleViewComponent_div_0_div_50_div_13_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 46);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const comm_r15 = i0.ɵɵnextContext().$implicit;\n    const ctx_r16 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate2(\"\", ctx_r16.getDate(comm_r15).toLocaleTimeString(), \" \", ctx_r16.getDate(comm_r15).toLocaleDateString(), \"\");\n  }\n}\nfunction TitleViewComponent_div_0_div_50_div_14_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 46);\n    i0.ɵɵtext(1, \"[date parse error]\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction TitleViewComponent_div_0_div_50_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 21)(1, \"div\", 35)(2, \"div\", 36)(3, \"a\", 37);\n    i0.ɵɵelement(4, \"img\", 38);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(5, \"div\", 39)(6, \"div\", 40)(7, \"div\", 41)(8, \"span\", 42);\n    i0.ɵɵtext(9);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"span\", 43);\n    i0.ɵɵtext(11);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(12, \"div\", 44);\n    i0.ɵɵtemplate(13, TitleViewComponent_div_0_div_50_div_13_Template, 2, 2, \"div\", 45);\n    i0.ɵɵtemplate(14, TitleViewComponent_div_0_div_50_div_14_Template, 2, 0, \"div\", 45);\n    i0.ɵɵelementEnd()()()()();\n  }\n  if (rf & 2) {\n    const comm_r15 = ctx.$implicit;\n    i0.ɵɵadvance(3);\n    i0.ɵɵpropertyInterpolate1(\"href\", \"/profile-view/\", comm_r15.user.id, \"\", i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"src\", comm_r15.user.img64, i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate1(\"[\", comm_r15.user.nickName, \"]\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(comm_r15.commentVal);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", comm_r15.creationDate);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !comm_r15.creationDate);\n  }\n}\nfunction TitleViewComponent_div_0_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r20 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 1)(1, \"div\", 2)(2, \"div\", 3);\n    i0.ɵɵelement(3, \"img\", 4);\n    i0.ɵɵelementStart(4, \"div\", 5);\n    i0.ɵɵtemplate(5, TitleViewComponent_div_0_button_5_Template, 3, 0, \"button\", 6);\n    i0.ɵɵtemplate(6, TitleViewComponent_div_0_button_6_Template, 3, 0, \"button\", 7);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(7, TitleViewComponent_div_0_div_7_Template, 5, 2, \"div\", 8);\n    i0.ɵɵelementStart(8, \"div\", 5);\n    i0.ɵɵelement(9, \"input\", 9);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"div\", 5);\n    i0.ɵɵelement(11, \"input\", 10);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"div\", 11);\n    i0.ɵɵelement(13, \"input\", 12);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(14, \"div\", 11);\n    i0.ɵɵelement(15, \"input\", 13);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(16, \"div\", 2)(17, \"h3\", 14);\n    i0.ɵɵtext(18, \"\\u041D\\u0430\\u0437\\u0432\\u0430: \");\n    i0.ɵɵelementStart(19, \"span\");\n    i0.ɵɵtext(20);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(21, \"div\", 15)(22, \"div\", 16)(23, \"div\", 17)(24, \"div\", 18)(25, \"span\", 19);\n    i0.ɵɵtext(26, \"\\u043A\\u0430\\u0442\\u0435\\u0433\\u043E\\u0440\\u0456\\u0457:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(27, TitleViewComponent_div_0_a_27_Template, 2, 1, \"a\", 20);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(28, \"div\", 17)(29, \"div\", 18)(30, \"span\", 19);\n    i0.ɵɵtext(31, \"\\u0442\\u0435\\u0433\\u0438:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(32, TitleViewComponent_div_0_a_32_Template, 2, 1, \"a\", 20);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(33, \"div\", 17)(34, \"div\", 18)(35, \"span\", 19);\n    i0.ɵɵtext(36, \"\\u0441\\u0435\\u0440\\u0456\\u0457 (\\u043F\\u043E\\u043A\\u043E\\u043B\\u0456\\u043D\\u043D\\u044F, \\u0442\\u043E\\u0449\\u043E):\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(37, TitleViewComponent_div_0_a_37_Template, 2, 1, \"a\", 20);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(38, \"div\", 21)(39, \"textarea\", 22);\n    i0.ɵɵtext(40);\n    i0.ɵɵelementEnd()()()();\n    i0.ɵɵelementStart(41, \"a\", 23);\n    i0.ɵɵtext(42, \" \\u041F\\u0435\\u0440\\u0435\\u0433\\u043B\\u044F\\u043D\\u0443\\u0442\\u0438 \\u0432\\u043C\\u0456\\u0441\\u0442 \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(43, \"div\", 24)(44, \"div\", 25)(45, \"div\", 26)(46, \"input\", 27);\n    i0.ɵɵlistener(\"ngModelChange\", function TitleViewComponent_div_0_Template_input_ngModelChange_46_listener($event) {\n      i0.ɵɵrestoreView(_r20);\n      const ctx_r19 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r19.comment = $event);\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(47, \"div\", 28)(48, \"button\", 29);\n    i0.ɵɵlistener(\"click\", function TitleViewComponent_div_0_Template_button_click_48_listener() {\n      i0.ɵɵrestoreView(_r20);\n      const ctx_r21 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r21.addComment());\n    });\n    i0.ɵɵtext(49, \"\\u0414\\u043E\\u0434\\u0430\\u0442\\u0438 \\u043A\\u043E\\u043C\\u0435\\u043D\\u0442\\u0430\\u0440\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵtemplate(50, TitleViewComponent_div_0_div_50_Template, 15, 6, \"div\", 30);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"src\", ctx_r0.title.titleImg, i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r0.isLiked);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.isLiked);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.title.author.nickName);\n    i0.ɵɵadvance(2);\n    i0.ɵɵpropertyInterpolate(\"placeholder\", \"\\u0442\\u0438\\u043F: \" + ctx_r0.title.typeName);\n    i0.ɵɵadvance(2);\n    i0.ɵɵpropertyInterpolate(\"placeholder\", \"\\u043F\\u0435\\u0440\\u0435\\u0433\\u043B\\u044F\\u0434\\u0456\\u0432: \" + ctx_r0.title.content.views);\n    i0.ɵɵadvance(2);\n    i0.ɵɵpropertyInterpolate(\"placeholder\", \"\\u043A\\u043E\\u043C\\u0435\\u043D\\u0442\\u0430\\u0440\\u0456\\u0432: \" + ctx_r0.title.content.comments.length);\n    i0.ɵɵadvance(2);\n    i0.ɵɵpropertyInterpolate(\"placeholder\", \"\\u043B\\u0430\\u0439\\u043A\\u0456\\u0432: \" + ctx_r0.title.content.likesCount);\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate(ctx_r0.title.titleName);\n    i0.ɵɵadvance(7);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.title.categories);\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.title.tags);\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.title.serials);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(\"Description: \" + ctx_r0.title.description);\n    i0.ɵɵadvance(1);\n    i0.ɵɵpropertyInterpolate1(\"href\", \"/titles/\", ctx_r0.title.id, \"/images\", i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"ngModel\", ctx_r0.comment);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.title.content.comments);\n  }\n}\nexport class TitleViewComponent {\n  constructor(httpclient, router, route) {\n    this.httpclient = httpclient;\n    this.router = router;\n    this.route = route;\n    this.isLiked = false;\n    this.clickCount = 0;\n    this.countSec = 0;\n    this.isWorking = false;\n    this.isViewed = false;\n    this.comment = '';\n    this.user = AppComponent.getUser();\n    let id = Number(this.route.snapshot.paramMap.get('id'));\n    if (id) {\n      this.loadTitleByID().subscribe(title => {\n        this.title = title;\n        this.isLiked = checkIfLiked(this.user, this.title.content.likes);\n        this.addView();\n      });\n    } else {\n      this.loadTitleRandom().subscribe(title => {\n        this.title = title;\n        this.isLiked = checkIfLiked(this.user, this.title.content.likes);\n        this.addView();\n      });\n    }\n    function checkIfLiked(user, likes) {\n      if (!user) return false;\n      let liked = false;\n      likes.forEach(x => {\n        if (x.userId === user.id) {\n          liked = true;\n          return;\n        }\n      });\n      return liked;\n    }\n  }\n  getReleaseYear(title) {\n    return new Date(title.creationDate).getFullYear();\n  }\n  getDate(comm) {\n    return new Date(comm.creationDate);\n  }\n  ngOnInit() {}\n  loadTitleByID() {\n    let id = this.route.snapshot.paramMap.get('id');\n    return this.httpclient.get(`${environment.serverUrl}/titles/${id}`);\n  }\n  addView() {\n    if (!this.title) return;\n    let url = `${environment.serverUrl}/titles/add-view/` + this.title.id;\n    setTimeout(() => {\n      this.httpclient.get(url).subscribe(() => {});\n    }, 10000);\n  }\n  loadTitleRandom() {\n    return this.httpclient.get(`${environment.serverUrl}/titles/random`);\n  }\n  parseDate(date) {\n    return new Date(date);\n  }\n  addComment() {\n    if (!this.user) {\n      this.router.navigate(['/sing-up']);\n      return;\n    }\n    if (!this.comment.trim()) return;\n    if (!this.title) return;\n    this.httpclient.post(`${environment.serverUrl}/titles/comment`, {\n      commentVal: this.comment,\n      titleContentId: this.title.id,\n      userId: this.user.id,\n      creationDate: new Date()\n    }).subscribe(() => location.reload());\n  }\n  like(doLike) {\n    this.clickCount++;\n    if (this.isWorking) {\n      return;\n    }\n    if (!this.user) {\n      this.router.navigate(['/sing-up']);\n      return;\n    }\n    this.isWorking = true;\n    let interval = setInterval(() => {\n      if (this.countSec === 5 && this.clickCount % 2 === 0) {\n        this.clear(interval);\n        return;\n      }\n      if (this.title && this.countSec === 5 && this.clickCount % 2 !== 0) {\n        if (doLike) {\n          this.httpclient.post(`${environment.serverUrl}/titles/like`, {\n            titleContentId: this.title.id,\n            // @ts-ignore\n            userId: this.user.id\n          }).subscribe();\n        } else {\n          this.httpclient.post(`${environment.serverUrl}/titles/unlike`, {\n            titleContentId: this.title.id,\n            // @ts-ignore\n            userId: this.user.id\n          }).subscribe();\n        }\n        this.clear(interval);\n        return;\n      }\n      this.countSec++;\n    }, 100);\n  }\n  clear(interval) {\n    this.countSec = 0;\n    this.isWorking = false;\n    this.clickCount = 0;\n    clearInterval(interval);\n  }\n  static #_ = this.ɵfac = function TitleViewComponent_Factory(t) {\n    return new (t || TitleViewComponent)(i0.ɵɵdirectiveInject(i1.HttpClient), i0.ɵɵdirectiveInject(i2.Router), i0.ɵɵdirectiveInject(i2.ActivatedRoute));\n  };\n  static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: TitleViewComponent,\n    selectors: [[\"app-title-view\"]],\n    decls: 1,\n    vars: 1,\n    consts: [[\"class\", \"justify-content-center\", 4, \"ngIf\"], [1, \"justify-content-center\"], [1, \"col-md-9\", \"col-lg-9\", \"mx-auto\"], [1, \"row\", \"g-1\"], [\"alt\", \"Admin\", 1, \"w-100\", 3, \"src\"], [1, \"col-sm-12\"], [\"class\", \"w-100 btn-lg btn-danger\", \"style\", \"color: white\", 3, \"click\", 4, \"ngIf\"], [\"class\", \"w-100 btn-lg btn-success\", 3, \"click\", 4, \"ngIf\"], [\"class\", \"col-sm-12\", 4, \"ngIf\"], [\"type\", \"text\", \"id\", \"type\", \"disabled\", \"\", 1, \"form-control\", \"text-center\", 3, \"placeholder\"], [\"type\", \"text\", \"id\", \"views\", \"disabled\", \"\", 1, \"form-control\", \"text-center\", 3, \"placeholder\"], [1, \"col-sm-6\"], [\"type\", \"text\", \"id\", \"comments\", \"disabled\", \"\", 1, \"form-control\", \"text-center\", 3, \"placeholder\"], [\"type\", \"text\", \"id\", \"likes\", \"disabled\", \"\", 1, \"form-control\", \"text-center\", 3, \"placeholder\"], [1, \"\", 2, \"margin\", \"20px 0\"], [1, \"bg-pink\", \"p-3\"], [1, \"col-12\", \"d-grid\"], [1, \"my-1\"], [1, \"d-flex\", 2, \"gap\", \"2px\"], [1, \"form-label\", 2, \"margin\", \"0\"], [\"style\", \"color: white\", \"class\", \"px-1\", 4, \"ngFor\", \"ngForOf\"], [1, \"col-12\"], [\"disabled\", \"\", 1, \"w-100\", 2, \"height\", \"100px\"], [1, \"col-3\", \"btn-lg\", \"not-border-top\", \"order-md-last\", 3, \"href\"], [1, \"row\", \"comments\"], [1, \"form-group\", \"d-flex\"], [1, \"col-9\"], [\"type\", \"text\", \"placeholder\", \"\\u041F\\u043E\\u0434\\u0456\\u043B\\u0456\\u0442\\u044C\\u0441\\u044F \\u0432\\u0440\\u0430\\u0436\\u0435\\u043D\\u043D\\u044F\\u043C\\u0438\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [1, \"col-3\"], [1, \"form-control\", 3, \"click\"], [\"class\", \"col-12\", 4, \"ngFor\", \"ngForOf\"], [1, \"w-100\", \"btn-lg\", \"btn-danger\", 2, \"color\", \"white\", 3, \"click\"], [1, \"w-100\", \"btn-lg\", \"btn-success\", 3, \"click\"], [1, \"w-100\", \"btn-lg\", \"btn-success\", 3, \"href\"], [1, \"px-1\", 2, \"color\", \"white\"], [1, \"row\", \"flex-column\", \"g-0\", \"px-3\", \"border\", \"rounded\", \"not-border-top\", \"overflow-hidden\", \"flex-md-row\", \"mb-4\", \"shadow-sm\", \"h-md-250\", \"position-relative\"], [1, \"col-auto\", \"d-none\", \"d-lg-block\"], [3, \"href\"], [\"alt\", \"\", \"width\", \"50\", 1, \"bd-placeholder-img\", 3, \"src\"], [1, \"col\", \"p-2\", \"likes-inner\", \"d-flex\", \"flex-column\", \"position-static\"], [1, \"row\"], [1, \"col-9\", \"d-flex\"], [1, \"title\"], [1, \"ml-3\", \"value\"], [1, \"col-3\", \"d-flex\"], [\"class\", \"mb-1 text-muted title\", 4, \"ngIf\"], [1, \"mb-1\", \"text-muted\", \"title\"]],\n    template: function TitleViewComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵtemplate(0, TitleViewComponent_div_0_Template, 51, 16, \"div\", 0);\n      }\n      if (rf & 2) {\n        i0.ɵɵproperty(\"ngIf\", ctx.title);\n      }\n    },\n    dependencies: [i3.NgForOf, i3.NgIf, i4.DefaultValueAccessor, i4.NgControlStatus, i4.NgModel],\n    styles: [\".description[_ngcontent-%COMP%] {\\n  \\n  background-color: #63c77f;\\n}\\n\\nbutton[_ngcontent-%COMP%], a[_ngcontent-%COMP%]{\\n  background-color: rgb(14, 65, 235);\\n  border: none;\\n\\n  color: white;\\n  text-align: center;\\n  display: inline-block;\\n}\\n\\nbutton[_ngcontent-%COMP%]:hover, a[_ngcontent-%COMP%]:hover {\\n  background-color: #5468ef;\\n}\\n\\n.left-bar[_ngcontent-%COMP%] {\\n  margin: 20px;\\n}\\n\\n.title-name[_ngcontent-%COMP%] {\\n  font-size: 24px;\\n}\\n\\n.right-bar[_ngcontent-%COMP%] {\\n  display: block;\\n  margin: 20px;\\n  width: 75%;\\n  overflow: hidden;\\n}\\n\\n.panel-btns-tags-cats-inner[_ngcontent-%COMP%] {\\n  display: flex;\\n  width: 100%;\\n  gap: 2px;\\n}\\n\\n.cats-tags[_ngcontent-%COMP%] {\\n  display: flex;\\n}\\n\\n.start-read[_ngcontent-%COMP%] {\\n  height: min-content;\\n  width: max-content;\\n  padding: 15px 32px;\\n  font-size: 20px;\\n  border-bottom-left-radius: 10px;\\n  border-bottom-right-radius: 10px;\\n}\\n\\n.title[_ngcontent-%COMP%] {\\n  font-size: 15px;\\n  color: green;\\n}\\n\\n.like[_ngcontent-%COMP%] {\\n  border-radius: 0;\\n  width: 200px;\\n  padding: 15px 32px;\\n  display: inline-block;\\n}\\n\\n.start-read[_ngcontent-%COMP%]:hover {\\n  cursor: pointer;\\n}\\n\\n.panel-btns-tags-cats[_ngcontent-%COMP%] {\\n  background-color: pink;\\n  padding: 10px;\\n}\\n\\n.comments[_ngcontent-%COMP%] {\\n  margin-top: 24%;\\n}\\n\\n.comment-from-user[_ngcontent-%COMP%]{\\n  border: 1px solid green;\\n  margin-top: 10px;\\n  padding: 5px 30px ;\\n  height: max-content;\\n  display: flex;\\n  justify-content: space-between;\\n}\\n\\n.comment-from-user[_ngcontent-%COMP%]:hover{\\n  background-color: #63c77f;\\n}\\n\\n.comment-inpt[_ngcontent-%COMP%] {\\n  width: 100%;\\n}\\n\\n.comment-inpt[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .comment-inpt[_ngcontent-%COMP%]   button[_ngcontent-%COMP%] {\\n  box-sizing: border-box;\\n  height: 30px;\\n  font-size: 16px;\\n}\\n\\n.comment-inpt[_ngcontent-%COMP%]   input[_ngcontent-%COMP%] {\\n  width: 70%;\\n}\\n\\n.comment-inpt[_ngcontent-%COMP%]   button[_ngcontent-%COMP%] {\\n  width: 30%;\\n}\\n\\n.comment-from-user[_ngcontent-%COMP%]   .user-img[_ngcontent-%COMP%] {\\n  height: min-content !important;\\n}\\n/*# sourceURL=webpack://./src/app/title-view/title-view.component.css */\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvdGl0bGUtdmlldy90aXRsZS12aWV3LmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSw2QkFBNkI7RUFDN0IseUJBQXlCO0FBQzNCOztBQUVBO0VBQ0Usa0NBQWtDO0VBQ2xDLFlBQVk7O0VBRVosWUFBWTtFQUNaLGtCQUFrQjtFQUNsQixxQkFBcUI7QUFDdkI7O0FBRUE7RUFDRSx5QkFBeUI7QUFDM0I7O0FBRUE7RUFDRSxZQUFZO0FBQ2Q7O0FBRUE7RUFDRSxlQUFlO0FBQ2pCOztBQUVBO0VBQ0UsY0FBYztFQUNkLFlBQVk7RUFDWixVQUFVO0VBQ1YsZ0JBQWdCO0FBQ2xCOztBQUVBO0VBQ0UsYUFBYTtFQUNiLFdBQVc7RUFDWCxRQUFRO0FBQ1Y7O0FBRUE7RUFDRSxhQUFhO0FBQ2Y7O0FBRUE7RUFDRSxtQkFBbUI7RUFDbkIsa0JBQWtCO0VBQ2xCLGtCQUFrQjtFQUNsQixlQUFlO0VBQ2YsK0JBQStCO0VBQy9CLGdDQUFnQztBQUNsQzs7QUFFQTtFQUNFLGVBQWU7RUFDZixZQUFZO0FBQ2Q7O0FBRUE7RUFDRSxnQkFBZ0I7RUFDaEIsWUFBWTtFQUNaLGtCQUFrQjtFQUNsQixxQkFBcUI7QUFDdkI7O0FBRUE7RUFDRSxlQUFlO0FBQ2pCOztBQUVBO0VBQ0Usc0JBQXNCO0VBQ3RCLGFBQWE7QUFDZjs7QUFFQTtFQUNFLGVBQWU7QUFDakI7O0FBRUE7RUFDRSx1QkFBdUI7RUFDdkIsZ0JBQWdCO0VBQ2hCLGtCQUFrQjtFQUNsQixtQkFBbUI7RUFDbkIsYUFBYTtFQUNiLDhCQUE4QjtBQUNoQzs7QUFFQTtFQUNFLHlCQUF5QjtBQUMzQjs7QUFFQTtFQUNFLFdBQVc7QUFDYjs7QUFFQTtFQUNFLHNCQUFzQjtFQUN0QixZQUFZO0VBQ1osZUFBZTtBQUNqQjs7QUFFQTtFQUNFLFVBQVU7QUFDWjs7QUFFQTtFQUNFLFVBQVU7QUFDWjs7QUFFQTtFQUNFLDhCQUE4QjtBQUNoQyIsInNvdXJjZXNDb250ZW50IjpbIi5kZXNjcmlwdGlvbiB7XG4gIC8qYmFja2dyb3VuZC1jb2xvcjogIzYzYzc3ZjsqL1xuICBiYWNrZ3JvdW5kLWNvbG9yOiAjNjNjNzdmO1xufVxuXG5idXR0b24gLCBhe1xuICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2IoMTQsIDY1LCAyMzUpO1xuICBib3JkZXI6IG5vbmU7XG5cbiAgY29sb3I6IHdoaXRlO1xuICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gIGRpc3BsYXk6IGlubGluZS1ibG9jaztcbn1cblxuYnV0dG9uOmhvdmVyLCBhOmhvdmVyIHtcbiAgYmFja2dyb3VuZC1jb2xvcjogIzU0NjhlZjtcbn1cblxuLmxlZnQtYmFyIHtcbiAgbWFyZ2luOiAyMHB4O1xufVxuXG4udGl0bGUtbmFtZSB7XG4gIGZvbnQtc2l6ZTogMjRweDtcbn1cblxuLnJpZ2h0LWJhciB7XG4gIGRpc3BsYXk6IGJsb2NrO1xuICBtYXJnaW46IDIwcHg7XG4gIHdpZHRoOiA3NSU7XG4gIG92ZXJmbG93OiBoaWRkZW47XG59XG5cbi5wYW5lbC1idG5zLXRhZ3MtY2F0cy1pbm5lciB7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIHdpZHRoOiAxMDAlO1xuICBnYXA6IDJweDtcbn1cblxuLmNhdHMtdGFncyB7XG4gIGRpc3BsYXk6IGZsZXg7XG59XG5cbi5zdGFydC1yZWFkIHtcbiAgaGVpZ2h0OiBtaW4tY29udGVudDtcbiAgd2lkdGg6IG1heC1jb250ZW50O1xuICBwYWRkaW5nOiAxNXB4IDMycHg7XG4gIGZvbnQtc2l6ZTogMjBweDtcbiAgYm9yZGVyLWJvdHRvbS1sZWZ0LXJhZGl1czogMTBweDtcbiAgYm9yZGVyLWJvdHRvbS1yaWdodC1yYWRpdXM6IDEwcHg7XG59XG5cbi50aXRsZSB7XG4gIGZvbnQtc2l6ZTogMTVweDtcbiAgY29sb3I6IGdyZWVuO1xufVxuXG4ubGlrZSB7XG4gIGJvcmRlci1yYWRpdXM6IDA7XG4gIHdpZHRoOiAyMDBweDtcbiAgcGFkZGluZzogMTVweCAzMnB4O1xuICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XG59XG5cbi5zdGFydC1yZWFkOmhvdmVyIHtcbiAgY3Vyc29yOiBwb2ludGVyO1xufVxuXG4ucGFuZWwtYnRucy10YWdzLWNhdHMge1xuICBiYWNrZ3JvdW5kLWNvbG9yOiBwaW5rO1xuICBwYWRkaW5nOiAxMHB4O1xufVxuXG4uY29tbWVudHMge1xuICBtYXJnaW4tdG9wOiAyNCU7XG59XG5cbi5jb21tZW50LWZyb20tdXNlcntcbiAgYm9yZGVyOiAxcHggc29saWQgZ3JlZW47XG4gIG1hcmdpbi10b3A6IDEwcHg7XG4gIHBhZGRpbmc6IDVweCAzMHB4IDtcbiAgaGVpZ2h0OiBtYXgtY29udGVudDtcbiAgZGlzcGxheTogZmxleDtcbiAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuO1xufVxuXG4uY29tbWVudC1mcm9tLXVzZXI6aG92ZXJ7XG4gIGJhY2tncm91bmQtY29sb3I6ICM2M2M3N2Y7XG59XG5cbi5jb21tZW50LWlucHQge1xuICB3aWR0aDogMTAwJTtcbn1cblxuLmNvbW1lbnQtaW5wdCBpbnB1dCwgLmNvbW1lbnQtaW5wdCBidXR0b24ge1xuICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xuICBoZWlnaHQ6IDMwcHg7XG4gIGZvbnQtc2l6ZTogMTZweDtcbn1cblxuLmNvbW1lbnQtaW5wdCBpbnB1dCB7XG4gIHdpZHRoOiA3MCU7XG59XG5cbi5jb21tZW50LWlucHQgYnV0dG9uIHtcbiAgd2lkdGg6IDMwJTtcbn1cblxuLmNvbW1lbnQtZnJvbS11c2VyIC51c2VyLWltZyB7XG4gIGhlaWdodDogbWluLWNvbnRlbnQgIWltcG9ydGFudDtcbn1cbiJdLCJzb3VyY2VSb290IjoiIn0= */\"]\n  });\n}","map":{"version":3,"mappings":"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","names":["environment","AppComponent","i0","ctx_r8","ctx_r10","TitleViewComponent","constructor","httpclient","router","route","user","getUser","id","Number","snapshot","paramMap","get","loadTitleByID","subscribe","title","isLiked","checkIfLiked","content","likes","addView","loadTitleRandom","liked","forEach","x","userId","getReleaseYear","Date","creationDate","getFullYear","getDate","comm","ngOnInit","serverUrl","url","setTimeout","parseDate","date","addComment","navigate","comment","trim","post","commentVal","titleContentId","location","reload","like","doLike","clickCount","isWorking","interval","setInterval","countSec","clear","clearInterval","selectors","decls","vars","consts","template"],"sourceRoot":"","sources":["M:\\content-pub-java-go-angular--master\\contentPublicationUI\\src\\app\\title-view\\title-view.component.ts","M:\\content-pub-java-go-angular--master\\contentPublicationUI\\src\\app\\title-view\\title-view.component.html"],"sourcesContent":["import {Component} from '@angular/core';\nimport {Comment, Like, Title} from \"../title\";\nimport {HttpClient} from \"@angular/common/http\";\nimport {environment} from \"../environment\";\nimport {ActivatedRoute, Router} from \"@angular/router\";\nimport {User} from \"../user\";\nimport {AppComponent} from \"../app.component\";\n\n@Component({\n  selector: 'app-title-view',\n  templateUrl: './title-view.component.html',\n  styleUrls: ['./title-view.component.css']\n})\nexport class TitleViewComponent {\n  title: Title | undefined;\n  user: User | undefined;\n  isLiked: boolean = false;\n  clickCount: number = 0;\n  countSec: number = 0;\n  isWorking: boolean = false;\n  isViewed: boolean = false;\n  comment: string = '';\n\n\n  constructor(private httpclient: HttpClient, private router: Router, private route: ActivatedRoute) {\n    this.user = AppComponent.getUser()\n    let id: number = Number(this.route.snapshot.paramMap.get('id'));\n    if (id) {\n      this.loadTitleByID().subscribe(title => {\n        this.title = title;\n        this.isLiked = checkIfLiked(this.user, this.title.content.likes);\n        this.addView();\n      });\n    } else {\n      this.loadTitleRandom().subscribe(title => {\n        this.title = title;\n        this.isLiked = checkIfLiked(this.user, this.title.content.likes);\n        this.addView();\n      });\n    }\n\n    function checkIfLiked(user: User | undefined, likes: Like[]): boolean {\n      if (!user) return false;\n      let liked = false;\n      likes.forEach(x => {\n          if (x.userId === user.id) {\n            liked = true;\n            return;\n          }\n        }\n      );\n      return liked;\n    }\n  }\n\n  getReleaseYear(title: Title): number {\n    return new Date(title.creationDate).getFullYear();\n  }\n\n\n  getDate(comm: Comment): Date {\n    return new Date(comm.creationDate);\n  }\n\n  ngOnInit(): void {\n  }\n\n  private loadTitleByID() {\n    let id = this.route.snapshot.paramMap.get('id');\n    return this.httpclient.get<Title>(`${environment.serverUrl}/titles/${id}`);\n  }\n\n  private addView() {\n    if (!this.title) return;\n    let url = `${environment.serverUrl}/titles/add-view/` + this.title.id\n    setTimeout(() => {\n      this.httpclient.get(url).subscribe(() => {\n      });\n    }, 10000);\n  }\n\n  private loadTitleRandom() {\n    return this.httpclient.get<Title>(`${environment.serverUrl}/titles/random`);\n  }\n\n  parseDate(date: Date): Date {\n    return new Date(date);\n  }\n\n  public addComment() {\n    if (!this.user) {\n      this.router.navigate(['/sing-up'])\n      return;\n    }\n    if (!this.comment.trim()) return;\n    if (!this.title) return;\n    this.httpclient.post(`${environment.serverUrl}/titles/comment`, {\n      commentVal: this.comment,\n      titleContentId: this.title.id,\n      userId: this.user.id,\n      creationDate: new Date(),\n    }).subscribe(() => location.reload());\n  }\n\n  like(doLike: boolean) {\n    this.clickCount++;\n    if (this.isWorking) {\n      return;\n    }\n    if (!this.user) {\n      this.router.navigate(['/sing-up'])\n      return;\n    }\n\n    this.isWorking = true;\n    let interval = setInterval(() => {\n      if (this.countSec === 5 && this.clickCount % 2 === 0) {\n        this.clear(interval);\n        return;\n      }\n      if (this.title && this.countSec === 5 && this.clickCount % 2 !== 0) {\n        if (doLike) {\n          this.httpclient.post<Title>(`${environment.serverUrl}/titles/like`, {\n            titleContentId: this.title.id,\n            // @ts-ignore\n            userId: this.user.id\n          }).subscribe();\n        } else {\n          this.httpclient.post<Title>(`${environment.serverUrl}/titles/unlike`, {\n            titleContentId: this.title.id,\n            // @ts-ignore\n            userId: this.user.id\n          }).subscribe();\n        }\n        this.clear(interval);\n        return;\n      }\n      this.countSec++;\n    }, 100);\n  }\n\n  clear(interval: NodeJS.Timer) {\n    this.countSec = 0;\n    this.isWorking = false;\n    this.clickCount = 0;\n    clearInterval(interval);\n  }\n\n\n}\n","<div *ngIf=\"title\" class=\"justify-content-center\">\n  <div class=\"col-md-9 col-lg-9 mx-auto\">\n    <div class=\"row g-1\">\n      <img [src]=\"title.titleImg\" alt=\"Admin\" class=\"w-100\">\n      <div class=\"col-sm-12\">\n        <button class=\"w-100 btn-lg btn-danger\" *ngIf=\"!isLiked\" style=\"color: white\"\n                (click)=\"isLiked = !isLiked; like(true);\">\n          <strong>Вподобати</strong>\n        </button>\n        <button class=\"w-100 btn-lg btn-success\" *ngIf=\"isLiked\"\n                (click)=\"isLiked = !isLiked; like(false);\">\n          <strong>Уподобано</strong>\n        </button>\n      </div>\n\n      <div class=\"col-sm-12\" *ngIf=\"title.author.nickName\">\n        <a class=\"w-100 btn-lg btn-success\"  href=\"/profile-view/{{title.author.id}}\"> Автор:\n          <strong>@{{title.author.nickName}}</strong>\n        </a>\n      </div>\n\n      <div class=\"col-sm-12\">\n        <input type=\"text\" class=\"form-control text-center\" id=\"type\"\n               placeholder=\"{{'тип: '+ title.typeName}}\" disabled>\n      </div>\n      <div class=\"col-sm-12\">\n        <input type=\"text\" class=\"form-control text-center\" id=\"views\"\n               placeholder=\"{{'переглядів: '+ title.content.views}}\" disabled>\n      </div>\n      <div class=\"col-sm-6\">\n        <input type=\"text\" class=\"form-control text-center\" id=\"comments\"\n               placeholder=\"{{'коментарів: '+ title.content.comments.length}}\" disabled>\n      </div>\n      <div class=\"col-sm-6\">\n        <input type=\"text\" class=\"form-control text-center\" id=\"likes\"\n               placeholder=\"{{'лайків: '+ title.content.likesCount}}\" disabled>\n      </div>\n    </div>\n  </div>\n\n  <div class=\"col-md-9 col-lg-9 mx-auto\">\n    <h3 class=\"\" style=\"margin: 20px 0;\">Назва: <span>{{title.titleName}}</span></h3>\n\n    <div class=\"bg-pink p-3\">\n      <div class=\"col-12 d-grid\">\n        <div class=\"my-1\">\n          <div class=\"d-flex\" style=\"gap: 2px;\">\n            <span style=\"margin: 0\" class=\"form-label\">категорії:</span>\n            <a style=\"color: white\" class=\"px-1\" *ngFor=\"let cat of title.categories\">{{cat.genre}}</a>\n          </div>\n        </div>\n        <div class=\"my-1\">\n          <div class=\"d-flex\" style=\"gap: 2px;\">\n            <span style=\"margin: 0\" class=\"form-label\">теги:</span>\n            <a style=\"color: white\" class=\"px-1\" *ngFor=\"let tag of title.tags\">{{tag.tag}}</a>\n          </div>\n        </div>\n        <div class=\"my-1\">\n          <div class=\"d-flex\" style=\"gap: 2px;\">\n            <span style=\"margin: 0\" class=\"form-label\">серії (покоління, тощо):</span>\n            <a style=\"color: white\" class=\"px-1\" *ngFor=\"let ser of title.serials\">{{ser.serialName}}</a>\n          </div>\n        </div>\n        <div class=\"col-12\">\n          <textarea style=\"height: 100px\" disabled class=\"w-100\">{{'Description: ' + title.description}}</textarea>\n        </div>\n      </div>\n\n    </div>\n    <a href=\"/titles/{{title.id}}/images\" class=\"col-3 btn-lg not-border-top order-md-last\">\n      Переглянути вміст\n    </a>\n\n\n    <div class=\"row comments\">\n      <div class=\"form-group d-flex\">\n        <div class=\"col-9\">\n          <input type=\"text\" [(ngModel)]=\"comment\" class=\"form-control\" placeholder=\"Поділіться враженнями\">\n        </div>\n        <div class=\"col-3\">\n          <button (click)=\"addComment()\" class=\"form-control\">Додати коментар</button>\n        </div>\n      </div>\n\n\n      <div class=\"col-12\" *ngFor=\"let comm of title.content.comments\">\n        <div\n          class=\"row flex-column g-0 px-3 border rounded not-border-top overflow-hidden flex-md-row mb-4 shadow-sm h-md-250 position-relative\">\n          <div class=\"col-auto d-none d-lg-block\">\n            <a href=\"/profile-view/{{comm.user.id}}\">\n              <img [src]=\"comm.user.img64\" alt=\"\" class=\"bd-placeholder-img\" width=\"50\">\n            </a>\n          </div>\n\n          <div class=\"col p-2 likes-inner d-flex flex-column position-static\">\n            <div class=\"row\">\n              <div class=\"col-9 d-flex\">\n                <span class=\"title\">[{{comm.user.nickName}}]</span>\n                <span class=\"ml-3 value\">{{comm.commentVal}}</span>\n              </div>\n              <div class=\"col-3 d-flex\">\n                <div class=\"mb-1 text-muted title\"\n                     *ngIf=\"comm.creationDate\">{{getDate(comm).toLocaleTimeString()}} {{getDate(comm).toLocaleDateString()}}</div>\n                <div class=\"mb-1 text-muted title\" *ngIf=\"!comm.creationDate\">[date parse error]</div>\n              </div>\n            </div>\n          </div>\n\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}